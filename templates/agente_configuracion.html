{% extends "base.html" %}

{% block content %}
<ul class="nav nav-tabs mb-4">
    <li class="nav-item">
        <a class="nav-link {% if request.endpoint == 'agente_dashboard' %}active{% endif %}" href="{{ url_for('agente_dashboard') }}">
            <i class="bi bi-speedometer2 me-2"></i>Dashboard
        </a>
    </li>
    <li class="nav-item">
        <a class="nav-link {% if request.endpoint == 'agente_configuracion' %}active{% endif %}" href="{{ url_for('agente_configuracion') }}">
            <i class="bi bi-gear me-2"></i>Configuración
        </a>
    </li>
</ul>

<div class="card">
    <div class="card-header">
        <h4 class="mb-0">Configuración de Email</h4>
    </div>
    <div class="card-body">
        <form method="POST" action="{{ url_for('agente_configuracion') }}">
            <div class="mb-3">
                <label for="email" class="form-label">Dirección de Email</label>
                <input type="email" class="form-control" id="email" name="email" value="{{ email }}" required>
            </div>
            <div class="mb-3">
                <label for="email_password" class="form-label">Contraseña de Email</label>
                <input type="password" class="form-control" id="email_password" name="email_password" placeholder="••••••••">
                <small class="text-muted">Dejar en blanco para mantener la contraseña actual</small>
            </div>
            <div class="mb-3">
                <label for="email_server" class="form-label">Servidor IMAP</label>
                <input type="text" class="form-control" id="email_server" name="email_server" value="{{ email_server }}" required>
                <small class="text-muted">Ejemplo: imap.gmail.com</small>
            </div>
            <div class="mb-3">
                <label for="email_port" class="form-label">Puerto IMAP</label>
                <input type="number" class="form-control" id="email_port" name="email_port" value="{{ email_port }}" required>
                <small class="text-muted">Puerto común: 993</small>
            </div>
            <button type="submit" class="btn btn-primary">Guardar Configuración</button>
        </form>
    </div>
</div>
{% endblock %}
